<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Parallel Execution · CodeceptJS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="CodeceptJS has two engines for running tests in parallel:"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Parallel Execution · CodeceptJS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://codecept.io/"/><meta property="og:description" content="CodeceptJS has two engines for running tests in parallel:"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-30075781-3"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-30075781-3');
            </script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="CodeceptJS"/><h2 class="headerTitleWithLogo">CodeceptJS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/quickstart" target="_self">Quickstart</a></li><li class="siteNavGroupActive"><a href="/basics" target="_self">Guides</a></li><li class=""><a href="/reference" target="_self">API</a></li><li class=""><a href="/changelog" target="_self">Releases</a></li><li class=""><a href="/help" target="_self">Support</a></li><li class=""><a href="https://github.com/Codeception/CodeceptJS" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Organizing Tests</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Web Testing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/webdriver">Testing with WebDriver</a></li><li class="navListItem"><a class="navItem" href="/puppeteer">Testing with Puppeteer</a></li><li class="navListItem"><a class="navItem" href="/testcafe">Testing with TestCafe</a></li><li class="navListItem"><a class="navItem" href="/angular">Testing with Protractor</a></li><li class="navListItem"><a class="navItem" href="/nightmare">Testing with Nightmare</a></li><li class="navListItem"><a class="navItem" href="/visual">Visual Testing</a></li><li class="navListItem"><a class="navItem" href="/email">Email Testing</a></li><li class="navListItem"><a class="navItem" href="/react">Testing React Applications</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Mobile Testing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/mobile">Mobile Testing with Appium</a></li><li class="navListItem"><a class="navItem" href="/detox">Testing React Native with Detox</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Organizing Tests</h3><ul class=""><li class="navListItem"><a class="navItem" href="/best">Best Practices</a></li><li class="navListItem"><a class="navItem" href="/locators">Locators</a></li><li class="navListItem"><a class="navItem" href="/pageobjects">Page Objects</a></li><li class="navListItem"><a class="navItem" href="/helpers">Custom Helpers</a></li><li class="navListItem"><a class="navItem" href="/bdd">Behavior Driven Development</a></li><li class="navListItem"><a class="navItem" href="/data">Data Management</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/parallel">Parallel Execution</a></li><li class="navListItem"><a class="navItem" href="/reports">Reporters</a></li><li class="navListItem"><a class="navItem" href="/advanced">Advanced Usage</a></li><li class="navListItem"><a class="navItem" href="/hooks">Bootstrap / Teardown / Plugins</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorials</h3><ul class=""><li class="navListItem"><a class="navItem" href="/books">Books &amp; Posts</a></li><li class="navListItem"><a class="navItem" href="/videos">Videos</a></li><li class="navListItem"><a class="navItem" href="/examples">Examples</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Codeception/CodeceptJS/blob/master/docs/parallel.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Parallel Execution</h1></header><article><div><span><p>CodeceptJS has two engines for running tests in parallel:</p>
<ul>
<li><code>run-workers</code> - which spawns <a href="https://nodejs.org/api/worker_threads.html">NodeJS Worker</a> in a thread. Tests are split by scenarios, scenarios are mixed between groups, each worker runs tests from its own group.</li>
<li><code>run-multiple</code> - which spawns a subprocess with CodeceptJS. Tests are split by files and configured in <code>codecept.conf.js</code>.</li>
</ul>
<p>Workers are faster and simpler to start, while <code>run-multiple</code> requires additional configuration and can be used to run tests in different browsers at once.</p>
<h2><a class="anchor" aria-hidden="true" id="parallel-execution-by-workers"></a><a href="#parallel-execution-by-workers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parallel Execution by Workers</h2>
<p>It is easy to run tests in parallel if you have a lots of tests and free CPU cores. Just execute your tests using <code>run-workers</code> command specifying the number of workers to spawn:</p>
<pre><code class="hljs">npx codeceptjs run-workers <span class="hljs-number">2</span>
</code></pre>
<blockquote>
<p>ℹ Workers require NodeJS &gt;= 11.7</p>
</blockquote>
<p>This command is similar to <code>run</code>, however, steps output can't be shown in workers mode, as it is impossible to synchronize steps output from different processes.</p>
<p>Each worker spins an instance of CodeceptJS, executes a group of tests, and sends back report to the main process.</p>
<p>By default the tests are assigned one by one to the avaible workers this may lead to multiple execution of <code>BeforeSuite()</code>. Use the option <code>--suites</code> to assigne the suites one by one to the workers.</p>
<pre><code class="hljs css language-sh">npx codeceptjs run-workers --suites 2
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="multiple-browsers-execution"></a><a href="#multiple-browsers-execution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple Browsers Execution</h2>
<p>This is useful if you want to execute same tests but on different browsers and with different configurations or different tests on same browsers in parallel.</p>
<p>Create <code>multiple</code> section in configuration file, and fill it with run suites. Each suite should have <code>browser</code> array with browser names or driver helper's configuration:</p>
<pre><code class="hljs css language-js">multiple: {
  <span class="hljs-attr">basic</span>: {
    <span class="hljs-comment">// run all tests in chrome and firefox</span>
    browsers: [<span class="hljs-string">"chrome"</span>, <span class="hljs-string">"firefox"</span>]
  },

  <span class="hljs-attr">smoke</span>: {
    <span class="hljs-attr">browsers</span>: [
      firefox,
      <span class="hljs-comment">// replace any config values from WebDriver helper</span>
      {
        <span class="hljs-attr">browser</span>: <span class="hljs-string">"chrome"</span>,
        <span class="hljs-attr">windowSize</span>: <span class="hljs-string">"maximize"</span>,
        <span class="hljs-attr">desiredCapabilities</span>: {
          <span class="hljs-attr">acceptSslCerts</span>: <span class="hljs-literal">true</span>
        }
      },
    ]
  },
}
</code></pre>
<p>You can use <code>grep</code> and <code>outputName</code> params to filter tests and output directory for suite:</p>
<pre><code class="hljs css language-js"><span class="hljs-string">"multiple"</span>: {
  <span class="hljs-string">"smoke"</span>: {
    <span class="hljs-comment">// run only tests containing "@smoke" in name</span>
    <span class="hljs-string">"grep"</span>: <span class="hljs-string">"@smoke"</span>,

    <span class="hljs-comment">// store results into `output/smoke` directory</span>
    <span class="hljs-string">"outputName"</span>: <span class="hljs-string">"smoke"</span>,

    <span class="hljs-string">"browsers"</span>: [
      <span class="hljs-string">"firefox"</span>,
      {<span class="hljs-string">"browser"</span>: <span class="hljs-string">"chrome"</span>, <span class="hljs-string">"windowSize"</span>: <span class="hljs-string">"maximize"</span>}
    ]
  }
}
</code></pre>
<p>Then tests can be executed using <code>run-multiple</code> command.</p>
<p>Run all suites for all browsers:</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple --all
</code></pre>
<p>Run <code>basic</code> suite for all browsers</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple basic
</code></pre>
<p>Run <code>basic</code> suite for chrome only:</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple basic:chrome
</code></pre>
<p>Run <code>basic</code> suite for chrome and <code>smoke</code> for firefox</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple basic:chrome smoke:firefox
</code></pre>
<p>Run basic tests with grep and junit reporter</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple basic --grep signin --reporter mocha-junit-reporter
</code></pre>
<p>Run regression tests specifying different config path:</p>
<pre><code class="hljs css language-sh">codeceptjs run-multiple regression -c path/to/config
</code></pre>
<p>Each executed process uses custom folder for reports and output. It is stored in subfolder inside an output directory. Subfolders will be named in <code>suite_browser</code> format.</p>
<p>Output is printed for all running processes. Each line is tagged with a suite and browser name:</p>
<pre><code class="hljs css language-sh">[basic:firefox] GitHub --
[basic:chrome] GitHub --
[basic:chrome]    it should not enter
[basic:chrome]  ✓ signin <span class="hljs-keyword">in</span> 2869ms

[basic:chrome]   OK  | 1 passed   // 30s
[basic:firefox]    it should not enter
[basic:firefox]  ✖ signin <span class="hljs-keyword">in</span> 2743ms

[basic:firefox] -- FAILURES:
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="hooks"></a><a href="#hooks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooks</h3>
<p>Hooks are available when using the <code>run-multiple</code> command to perform actions before the test suites start and after the test suites have finished. See <a href="https://codecept.io/hooks/#bootstrap-teardown">Hooks</a> for an example.</p>
<h3><a class="anchor" aria-hidden="true" id="parallel-execution"></a><a href="#parallel-execution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parallel Execution</h3>
<p>CodeceptJS can be configured to run tests in parallel.</p>
<p>When enabled, it collects all test files and executes them in parallel by the specified amount of chunks. Given we have five test scenarios (<code>a_test.js</code>,<code>b_test.js</code>,<code>c_test.js</code>,<code>d_test.js</code> and <code>e_test.js</code>), by setting <code>&quot;chunks&quot;: 2</code> we tell the runner to run two suites in parallel. The first suite will run <code>a_test.js</code>,<code>b_test.js</code> and <code>c_test.js</code>, the second suite will run <code>d_test.js</code> and <code>e_test.js</code>.</p>
<pre><code class="hljs css language-js">multiple: {
  <span class="hljs-attr">parallel</span>: {
    <span class="hljs-comment">// Splits tests into 2 chunks</span>
    chunks: <span class="hljs-number">2</span>
  }
}
</code></pre>
<p>To execute them use <code>run-multiple</code> command passing configured suite, which is <code>parallel</code> in this example:</p>
<pre><code class="hljs">codeceptjs run-multiple parallel
</code></pre>
<p>Grep and multiple browsers are supported. Passing more than one browser will multiply the amount of suites by the amount of browsers passed. The following example will lead to four parallel runs.</p>
<pre><code class="hljs css language-js">multiple: {
  <span class="hljs-comment">// 2x chunks + 2x browsers = 4</span>
  parallel: {
    <span class="hljs-comment">// Splits tests into chunks</span>
    chunks: <span class="hljs-number">2</span>,
    <span class="hljs-comment">// run all tests in chrome and firefox</span>
    browsers: [<span class="hljs-string">"chrome"</span>, <span class="hljs-string">"firefox"</span>]
  },
}
</code></pre>
<p>Passing a function will enable you to provide your own chunking algorithm. The first argument passed to you function is an array of all test files, if you enabled grep the test files passed are already filtered to match the grep pattern.</p>
<pre><code class="hljs css language-js">multiple: {
  <span class="hljs-attr">parallel</span>: {
    <span class="hljs-comment">// Splits tests into chunks by passing an anonymous function,</span>
    <span class="hljs-comment">// only execute first and last found test file</span>
    chunks: <span class="hljs-function">(<span class="hljs-params">files</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> [
        [ files[<span class="hljs-number">0</span>] ], <span class="hljs-comment">// chunk 1</span>
        [ files[files.length<span class="hljs-number">-1</span>] ], <span class="hljs-comment">// chunk 2</span>
      ]
    },
    <span class="hljs-comment">// run all tests in chrome and firefox</span>
    browsers: [<span class="hljs-string">"chrome"</span>, <span class="hljs-string">"firefox"</span>]
  }
}
</code></pre>
<blockquote>
<p>Chunking will be most effective if you have many individual test files that contain only a small amount of scenarios. Otherwise the combined execution time of many scenarios or big scenarios in one single test file potentially lead to an uneven execution time.</p>
</blockquote>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-9-24</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/data"><span class="arrow-prev">← </span><span>Data Management</span></a><a class="docs-next button" href="/reports"><span>Reporters</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#parallel-execution-by-workers">Parallel Execution by Workers</a></li><li><a href="#multiple-browsers-execution">Multiple Browsers Execution</a><ul class="toc-headings"><li><a href="#hooks">Hooks</a></li><li><a href="#parallel-execution">Parallel Execution</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="CodeceptJS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/quickstart">QuickStart</a><a href="/basics">Guides</a><a href="/reference">Reference</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LWE4MThhN2NmYTgxNTU5MTc4YzAyYWMwY2JkMmZlYWI5MWQ2MDM5MmRmYzZmYmNiNmY5NTAzM2EwMGIwOTNhOGQ">Slack Chat</a><a href="https://codecept.discourse.group" target="_blank" rel="noreferrer noopener">Community Forum</a><a href="http://stackoverflow.com/questions/tagged/codeceptjs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/codeceptjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/Codeception/CodeceptJS">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/codeception/codeceptjs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&amp;utm_medium=footer&amp;utm_term=link&amp;utm_campaign=reference">Commercial Support</a><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&amp;utm_medium=top_menu&amp;utm_term=link&amp;utm_campaign=reference">Trainings</a></div></section><section class="copyright">Copyright © 2019 CodeceptJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0cc13a0af567a05fc38790be681b1491',
                indexName: 'codecept',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>