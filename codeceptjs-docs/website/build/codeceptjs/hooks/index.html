<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Bootstrap / Teardown / Plugins · CodeceptJS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="CodeceptJS provides API to run custom code before and after the test and inject custom listeners into the event system."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Bootstrap / Teardown / Plugins · CodeceptJS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://codecept.io/"/><meta property="og:description" content="CodeceptJS provides API to run custom code before and after the test and inject custom listeners into the event system."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-30075781-3"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-30075781-3');
            </script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="CodeceptJS"/><h2 class="headerTitleWithLogo">CodeceptJS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/quickstart" target="_self">Quickstart</a></li><li class="siteNavGroupActive"><a href="/basics" target="_self">Guides</a></li><li class=""><a href="/reference" target="_self">API</a></li><li class=""><a href="/changelog" target="_self">Releases</a></li><li class=""><a href="/help" target="_self">Support</a></li><li class=""><a href="https://github.com/Codeception/CodeceptJS" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Organizing Tests</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Web Testing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/webdriver">Testing with WebDriver</a></li><li class="navListItem"><a class="navItem" href="/puppeteer">Testing with Puppeteer</a></li><li class="navListItem"><a class="navItem" href="/testcafe">Testing with TestCafe</a></li><li class="navListItem"><a class="navItem" href="/angular">Testing with Protractor</a></li><li class="navListItem"><a class="navItem" href="/nightmare">Testing with Nightmare</a></li><li class="navListItem"><a class="navItem" href="/visual">Visual Testing</a></li><li class="navListItem"><a class="navItem" href="/email">Email Testing</a></li><li class="navListItem"><a class="navItem" href="/react">Testing React Applications</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Mobile Testing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/mobile">Mobile Testing with Appium</a></li><li class="navListItem"><a class="navItem" href="/detox">Testing React Native with Detox</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Organizing Tests</h3><ul class=""><li class="navListItem"><a class="navItem" href="/best">Best Practices</a></li><li class="navListItem"><a class="navItem" href="/locators">Locators</a></li><li class="navListItem"><a class="navItem" href="/pageobjects">Page Objects</a></li><li class="navListItem"><a class="navItem" href="/helpers">Custom Helpers</a></li><li class="navListItem"><a class="navItem" href="/bdd">Behavior Driven Development</a></li><li class="navListItem"><a class="navItem" href="/data">Data Management</a></li><li class="navListItem"><a class="navItem" href="/parallel">Parallel Execution</a></li><li class="navListItem"><a class="navItem" href="/reports">Reporters</a></li><li class="navListItem"><a class="navItem" href="/advanced">Advanced Usage</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/hooks">Bootstrap / Teardown / Plugins</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorials</h3><ul class=""><li class="navListItem"><a class="navItem" href="/books">Books &amp; Posts</a></li><li class="navListItem"><a class="navItem" href="/videos">Videos</a></li><li class="navListItem"><a class="navItem" href="/examples">Examples</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Codeception/CodeceptJS/blob/master/docs/hooks.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Bootstrap / Teardown / Plugins</h1></header><article><div><span><p>CodeceptJS provides API to run custom code before and after the test and inject custom listeners into the event system.</p>
<h2><a class="anchor" aria-hidden="true" id="bootstrap-teardown"></a><a href="#bootstrap-teardown" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bootstrap &amp; Teardown</h2>
<p>In case you need to execute arbitrary code before or after the tests,
you can use <code>bootstrap</code> and <code>teardown</code> config. Use it to start and stop webserver, Selenium, etc.</p>
<p>When using the <a href="http://codecept.io/advanced/#multiple-execution">Multiple Execution</a> mode, there are two additional hooks available; <code>bootstrapAll</code> and <code>teardownAll</code>. See <a href="#bootstrapall--teardownall">BootstrapAll &amp; TeardownAll</a> for more information.</p>
<p>There are different ways to define bootstrap and teardown functions:</p>
<ul>
<li>JS file executed as is (synchronously).</li>
<li>JS file exporting function with optional callback for async execution.</li>
<li>JS file exporting an object with <code>bootstrap</code> and <code>teardown</code> methods.</li>
<li>Inside JS config file</li>
</ul>
<p>Corresponding examples provided in next sections.</p>
<h3><a class="anchor" aria-hidden="true" id="example-async-bootstrap-in-a-function"></a><a href="#example-async-bootstrap-in-a-function" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Async Bootstrap in a Function</h3>
<p>Add to <code>codecept.conf.js</code>:</p>
<pre><code class="hljs css language-json">"bootstrap": "./run_server.js"
</code></pre>
<p>Export a function in your bootstrap file:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// bootstrap.js</span>
<span class="hljs-keyword">var</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app_server'</span>);
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
  <span class="hljs-comment">// on error call done('error description') to stop</span>
  <span class="hljs-keyword">if</span> (!server.validateConfig()) {
    done(<span class="hljs-string">"Can't execute server with invalid config, tests stopped"</span>);
  }
  <span class="hljs-comment">// call done() to continue execution</span>
  server.run(done);
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-async-teardown-in-a-function"></a><a href="#example-async-teardown-in-a-function" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Async Teardown in a Function</h3>
<p>Stopping a server from a previous example can be done in a similar manner.
Create a teardown file and add it to <code>codecept.json</code>:</p>
<pre><code class="hljs css language-json">"teardown": "./stop_server.js"
</code></pre>
<p>Inside <code>stop_server.js</code>:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app_server'</span>);
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
  server.stop(done);
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-bootstrap-teardown-inside-an-object"></a><a href="#example-bootstrap-teardown-inside-an-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Bootstrap &amp; Teardown Inside an Object</h3>
<p>Examples above can be combined into one file.</p>
<p>Add to config (<code>codecept.json</code>):</p>
<pre><code class="hljs css language-js">  <span class="hljs-string">"bootstrap"</span>: <span class="hljs-string">"./server.js"</span>
  <span class="hljs-string">"teardown"</span>: <span class="hljs-string">"./server.js"</span>
</code></pre>
<p><code>server.js</code> should export object with <code>bootstrap</code> and <code>teardown</code> functions:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// bootstrap.js</span>
<span class="hljs-keyword">var</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app_server'</span>);
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">bootstrap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.start(done);
  },
  <span class="hljs-attr">teardown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.stop(done);
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-bootstrap-teardown-inside-config"></a><a href="#example-bootstrap-teardown-inside-config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Bootstrap &amp; Teardown Inside Config</h3>
<p>If you are using JavaScript-style config <code>codecept.conf.js</code>, bootstrap and teardown functions can be placed inside of it:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app_server'</span>);

exports.config = {
  <span class="hljs-attr">tests</span>: <span class="hljs-string">"./*_test.js"</span>,
  <span class="hljs-attr">helpers</span>: {},

  <span class="hljs-comment">// adding bootstrap/teardown</span>
  bootstrap: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.launch(done);
  },
  <span class="hljs-attr">teardown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.stop(done);
  }
  <span class="hljs-comment">// ...</span>
  <span class="hljs-comment">// other config options</span>
}

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="bootstrapall-teardownall"></a><a href="#bootstrapall-teardownall" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BootstrapAll &amp; TeardownAll</h2>
<p>There are two additional hooks for <a href="http://codecept.io/parallel">parallel execution</a> in <code>run-multiple</code> or <code>run-workers</code> commands.</p>
<p>These hooks are only called in the parent process. Before child processes start (<code>bootstrapAll</code>) and after all of runs have finished (<code>teardownAll</code>). Unlike them, the <code>bootstrap</code> and <code>teardown</code> hooks are called between and after each of child processes respectively.</p>
<p>For example, when you run tests in 2 workers using the following command:</p>
<pre><code class="hljs">npx codeceptjs run-workers <span class="hljs-number">2</span>
</code></pre>
<p>First, <code>bootstrapAll</code> is called. Then two <code>bootstrap</code> runs in each of workers. Then tests in worker #1 ends and <code>teardown</code> is called. Same for worker #2. Finally, <code>teardownAll</code> runs in the main process.</p>
<blockquote>
<p>The same behavior is set for <code>run-multiple</code> command</p>
</blockquote>
<p>The <code>bootstrapAll</code> and <code>teardownAll</code> hooks are preferred to use for setting up common logic of tested project: to start application server or database, to start webdriver's grid.</p>
<p>The <code>bootstrap</code> and <code>teardown</code> hooks are used for setting up each testing browser: to create unique <a href="https://codecept.io/helpers/WebDriverIO#cloud-providers">cloud testing server</a> connection or to create specific browser-related test data in database (like users with names with browsername in it).</p>
<p>Same as <code>bootstrap</code> and <code>teardown</code>, there are 3 ways to define <code>bootstrapAll</code> and <code>teardownAll</code> functions:</p>
<ul>
<li>JS file executed as is (synchronously).</li>
<li>JS file exporting function with optional callback for async execution.</li>
<li>JS file exporting an object with <code>bootstrapAll</code> and <code>teardownAll</code> methods.</li>
<li>Inside JS config file</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="example-bootstrapall-teardownall-inside-config"></a><a href="#example-bootstrapall-teardownall-inside-config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: BootstrapAll &amp; TeardownAll Inside Config</h3>
<p>Using JavaScript-style config <code>codecept.conf.js</code>, bootstrapAll and teardownAll functions can be placed inside of it:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> tempFolder = process.cwd() + <span class="hljs-string">'/tmpFolder'</span>;

exports.config = {
  <span class="hljs-attr">tests</span>: <span class="hljs-string">"./*_test.js"</span>,
  <span class="hljs-attr">helpers</span>: {},

  <span class="hljs-attr">multiple</span>: {
    <span class="hljs-attr">suite1</span>: {
      <span class="hljs-attr">grep</span>: <span class="hljs-string">'@suite1'</span>,
      <span class="hljs-attr">browsers</span>: [ <span class="hljs-string">'chrome'</span>, <span class="hljs-string">'firefox'</span> ],
    },
    <span class="hljs-attr">suite2</span>: {
      <span class="hljs-attr">grep</span>: <span class="hljs-string">'@suite2'</span>,
      <span class="hljs-attr">browsers</span>: [ <span class="hljs-string">'chrome'</span> ],
    },
  },

  <span class="hljs-comment">// adding bootstrapAll/teardownAll</span>
  bootstrapAll: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    fs.mkdir(tempFolder, (err) =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Create a temp folder before all test suites start'</span>, err);
      done();
    });
  },

  <span class="hljs-attr">bootstrap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Do some pretty suite setup stuff'</span>);
    done(); <span class="hljs-comment">// Don't forget to call done()</span>
  },

  <span class="hljs-attr">teardown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Cool, one of the test suites have finished'</span>);
    done();
  },

  <span class="hljs-attr">teardownAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'All suites are now done so we should clean up the temp folder'</span>);

    fs.rmdir(tempFolder, (err) =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Ok, now I am done'</span>, err);
      done();
    });
  },

  <span class="hljs-comment">// ...</span>
  <span class="hljs-comment">// other config options</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-bootstrap-teardown-inside-an-object-1"></a><a href="#example-bootstrap-teardown-inside-an-object-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Bootstrap &amp; Teardown Inside an Object</h3>
<p>Examples above can be combined into one file.</p>
<p>Add to config (<code>codecept.json</code>):</p>
<pre><code class="hljs css language-js">  <span class="hljs-string">"bootstrapAll"</span>: <span class="hljs-string">"./presettings.js"</span>
  <span class="hljs-string">"teardownAll"</span>: <span class="hljs-string">"./presettings.js"</span>
  <span class="hljs-string">"bootstrap"</span>: <span class="hljs-string">"./presettings.js"</span>
  <span class="hljs-string">"teardown"</span>: <span class="hljs-string">"./presettings.js"</span>
</code></pre>
<p><code>presettings.js</code> should export object with <code>bootstrap</code> and <code>teardown</code> functions:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// presettings.js</span>
<span class="hljs-keyword">const</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app_server'</span>);
<span class="hljs-keyword">const</span> browserstackConnection = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./browserstackConnection"</span>);
<span class="hljs-keyword">const</span> uniqueIdentifier = generateSomeUniqueIdentifierFunction();

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">bootstrapAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.start(done);
  },
  <span class="hljs-attr">teardownAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    server.stop(done);
  },
  <span class="hljs-attr">bootstrap</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    browserstackConnection.connect(uniqueIdentifier);
  },
  <span class="hljs-attr">teardown</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">done</span>) </span>{
    browserstackConnection.disconnect(uniqueIdentifier);
  },
}
</code></pre>
<p><strong>Remember</strong>: The <code>bootstrapAll</code> and <code>teardownAll</code> hooks are only called when using <a href="http://codecept.io/advanced/#multiple-execution">Multiple Execution</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="plugins"></a><a href="#plugins" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins</h2>
<p>Plugins allow to use CodeceptJS internal API to extend functionality. Use internal event dispatcher, container, output, promise recorder, to create your own reporters, test listeners, etc.</p>
<p>CodeceptJS includes <a href="https://codecept.io/plugins/">built-in plugins</a> which extend basic functionality and can be turned on and off on purpose. Taking them as <a href="https://github.com/Codeception/CodeceptJS/tree/master/lib/plugin">examples</a> you can develop your custom plugins.</p>
<p>A plugin is a basic JS module returning a function. Plugins can have individual configs which are passed into this function:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> defaultConfig = {
  <span class="hljs-attr">someDefaultOption</span>: <span class="hljs-literal">true</span>
}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{
  config = <span class="hljs-built_in">Object</span>.assign(defaultConfig, config);
  <span class="hljs-comment">// do stuff</span>
}
</code></pre>
<p>Plugin can register event listeners or hook into promise chain with recorder. See <a href="https://github.com/Codeception/CodeceptJS/tree/master/lib/helper">API reference</a>.</p>
<p>To enable your custom plugin in config add it to <code>plugins</code> section. Specify path to node module using <code>require</code>.</p>
<pre><code class="hljs css language-js"><span class="hljs-string">"plugins"</span>: {
  <span class="hljs-string">"myPlugin"</span>: {
    <span class="hljs-string">"require"</span>: <span class="hljs-string">"./path/to/my/module"</span>,
    <span class="hljs-string">"enabled"</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<ul>
<li><code>require</code> - specifies relative path to a plugin file. Path is relative to config file.</li>
<li><code>enabled</code> - to enable this plugin.</li>
</ul>
<p>If a plugin is disabled (<code>enabled</code> is not set or false) this plugin can be enabled from command line:</p>
<pre><code class="hljs">./node_modules/.bin/codeceptjs run --plugin myPlugin
</code></pre>
<p>Several plugins can be enabled as well:</p>
<pre><code class="hljs">./node_modules/.bin/codeceptjs run --plugin myPlugin,allure
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-execute-code-for-a-specific-group-of-tests"></a><a href="#example-execute-code-for-a-specific-group-of-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Execute code for a specific group of tests</h3>
<p>If you need to execute some code before a group of tests, you can <a href="https://codecept.io/advanced/#tags">mark these tests with a same tag</a>. Then to listen for tests where this tag is included (see <a href="#test-object">test object api</a>).</p>
<p>Let's say we need to populate database for a group of tests.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// populate database for slow tests</span>
<span class="hljs-keyword">const</span> event = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).event;

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  event.dispatcher.on(event.test.before, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">test</span>) </span>{

    <span class="hljs-keyword">if</span> (test.tags.indexOf(<span class="hljs-string">'@populate'</span>) &gt;= <span class="hljs-number">0</span>) {
      recorder.add(<span class="hljs-string">'populate database'</span>, <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-comment">// populate database for this test</span>
      })
    }
  });
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-check-url-before-running-a-test"></a><a href="#example-check-url-before-running-a-test" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Check URL before running a test</h3>
<p>If you want to share bootstrap script or run multiple bootstraps, it's a good idea to wrap that script into a plugin.
Plugin can also execute JS before tests but you need to use internal APIs to synchronize promises.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { recorder } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{

  event.dispatcher.on(event.all.before, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    recorder.startUnlessRunning(); <span class="hljs-comment">// start recording promises</span>
    recorder.add(<span class="hljs-string">'do some async stuff'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// your code</span>
    });
  });
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="api"></a><a href="#api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>API</h2>
<p><strong>Use local CodeceptJS installation to get access to <code>codeceptjs</code> module</strong></p>
<p>CodeceptJS provides an API which can be loaded via <code>require('codeceptjs')</code> when CodeceptJS is installed locally.
These internal objects are available:</p>
<ul>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/codecept.js"><code>codecept</code></a>: test runner class</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/config.js"><code>config</code></a>: current codecept config</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/event.js"><code>event</code></a>: event listener</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/recorder.js"><code>recorder</code></a>: global promise chain</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/output.js"><code>output</code></a>: internal printer</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/container.js"><code>container</code></a>: dependency injection container for tests, includes current helpers and support objects</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/helper.js"><code>helper</code></a>: basic helper class</li>
<li><a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/actor.js"><code>actor</code></a>: basic actor (I) class</li>
</ul>
<p><a href="https://github.com/Codeception/CodeceptJS/tree/master/docs/api">API reference</a> is available on GitHub.
Also please check the source code of corresponding modules.</p>
<h3><a class="anchor" aria-hidden="true" id="event-listeners"></a><a href="#event-listeners" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event Listeners</h3>
<p>CodeceptJS provides a module with <a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/event.js">event dispatcher and set of predefined events</a>.</p>
<p>It can be required from codeceptjs package if it is installed locally.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> event = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).event;

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  event.dispatcher.on(event.test.before, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">test</span>) </span>{

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'--- I am before test --'</span>);

  });
}
</code></pre>
<p>Available events:</p>
<ul>
<li><p><code>event.test.before(test)</code> - <em>async</em> when <code>Before</code> hooks from helpers and from test is executed</p></li>
<li><p><code>event.test.after(test)</code> - <em>async</em> after each test</p></li>
<li><p><code>event.test.started(test)</code> - <em>sync</em> at the very beginning of a test. Passes a current test object.</p></li>
<li><p><code>event.test.passed(test)</code> - <em>sync</em> when test passed</p></li>
<li><p><code>event.test.failed(test, error)</code> - <em>sync</em> when test failed</p></li>
<li><p><code>event.test.finished(test)</code> - <em>sync</em> when test finished</p></li>
<li><p><code>event.suite.before(suite)</code> - <em>async</em> before a suite</p></li>
<li><p><code>event.suite.after(suite)</code> - <em>async</em> after a suite</p></li>
<li><p><code>event.step.before(step)</code> - <em>async</em> when the step is scheduled for execution</p></li>
<li><p><code>event.step.after(step)</code>- <em>async</em> after a step</p></li>
<li><p><code>event.step.started(step)</code> - <em>sync</em> when step starts.</p></li>
<li><p><code>event.step.passed(step)</code> - <em>sync</em> when step passed.</p></li>
<li><p><code>event.step.failed(step, err)</code> - <em>sync</em> when step failed.</p></li>
<li><p><code>event.step.finished(step)</code> - <em>sync</em> when step finishes.</p></li>
<li><p><code>event.step.comment(step)</code> - <em>sync</em> fired for comments like <code>I.say</code>.</p></li>
<li><p><code>event.all.before</code> - before running tests</p></li>
<li><p><code>event.all.after</code> - after running tests</p></li>
<li><p><code>event.all.result</code> - when results are printed</p></li>
<li><p><em>sync</em> - means that event is fired in the moment of action happens.</p></li>
<li><p><em>async</em> - means that event is fired when an actions is scheduled. Use <code>recorder</code> to schedule your actions.</p></li>
</ul>
<p>For further reference look for <a href="https://github.com/Codeception/CodeceptJS/tree/master/lib/listener">currently available listeners</a> using event system.</p>
<h4><a class="anchor" aria-hidden="true" id="test-object"></a><a href="#test-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test Object</h4>
<p>Test events provide a test object with following fields:</p>
<ul>
<li><code>title</code> title of a test</li>
<li><code>body</code> test function as a string</li>
<li><code>opts</code> additional test options like retries, and others</li>
<li><code>pending</code> true if test is scheduled for execution and false if a test has finished</li>
<li><code>tags</code> array of tags for this test</li>
<li><code>file</code> path to a file with a test.</li>
<li><code>steps</code> array of executed steps (available only in <code>test.passed</code>, <code>test.failed</code>, <code>test.finished</code> event)</li>
</ul>
<p>and others</p>
<h4><a class="anchor" aria-hidden="true" id="step-object"></a><a href="#step-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step Object</h4>
<p>Step events provide step objects with following fields:</p>
<ul>
<li><code>name</code> name of a step, like 'see', 'click', and others</li>
<li><code>actor</code> current actor, in most cases it <code>I</code></li>
<li><code>helper</code> current helper instance used to execute this step</li>
<li><code>helperMethod</code> corresponding helper method, in most cases is the same as <code>name</code></li>
<li><code>status</code> status of a step (passed or failed)</li>
<li><code>prefix</code> if a step is executed inside <code>within</code> block contain within text, like: 'Within .js-signup-form'.</li>
<li><code>args</code> passed arguments</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="recorder"></a><a href="#recorder" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recorder</h3>
<p>To inject asynchronous functions in a test or before/after a test you can subscribe to corresponding event and register a function inside a recorder object. <a href="https://github.com/Codeception/CodeceptJS/blob/master/lib/recorder.js">Recorder</a> represents a global promises chain.</p>
<p>Provide a function description as a first parameter, function should return a promise:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> event = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).event;
<span class="hljs-keyword">const</span> recorder = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).recorder;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  event.dispatcher.on(event.test.before, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">test</span>) </span>{

    <span class="hljs-keyword">const</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);

    recorder.add(<span class="hljs-string">'create fixture data via API'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">doneFn, errFn</span>) =&gt;</span> {
        request({
          <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">'http://api.site.com/'</span>,
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">'/users'</span>,
          <span class="hljs-attr">json</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'john'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'john@john.com'</span> }
        }), (err, httpResponse, body) =&gt; {
          <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> errFn(err);
          doneFn();
        }
      });
    }
  });
}

</code></pre>
<p>Whenever you execute tests with <code>--verbose</code> option you will see registered events and promises executed by a recorder.</p>
<h3><a class="anchor" aria-hidden="true" id="output"></a><a href="#output" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output</h3>
<p>Output module provides 4 verbosity levels. Depending on the mode you can have different information printed using corresponding functions.</p>
<ul>
<li><code>default</code>: prints basic information using <code>output.print</code></li>
<li><code>steps</code>: toggled by <code>--steps</code> option, prints step execution</li>
<li><code>debug</code>: toggled by <code>--debug</code> option, prints steps, and debug information with <code>output.debug</code></li>
<li><code>verbose</code>: toggled by <code>--verbose</code> prints debug information and internal logs with <code>output.log</code></li>
</ul>
<p>It is recommended to avoid <code>console.log</code> and use output.* methods for printing.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> output = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).output;

output.print(<span class="hljs-string">'This is basic information'</span>);
output.debug(<span class="hljs-string">'This is debug information'</span>);
output.log(<span class="hljs-string">'This is verbose logging information'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="container"></a><a href="#container" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Container</h3>
<p>CodeceptJS has a dependency injection container with Helpers and Support objects.
They can be retrieved from the container:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> container = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).container;

<span class="hljs-comment">// get object with all helpers</span>
<span class="hljs-keyword">let</span> helpers = container.helpers();

<span class="hljs-comment">// get helper by name</span>
<span class="hljs-keyword">let</span> WebDriver = container.helpers(<span class="hljs-string">'WebDriver'</span>);

<span class="hljs-comment">// get support objects</span>
<span class="hljs-keyword">let</span> support = container.support();

<span class="hljs-comment">// get support object by name</span>
<span class="hljs-keyword">let</span> UserPage = container.support(<span class="hljs-string">'UserPage'</span>);

<span class="hljs-comment">// get all registered plugins</span>
<span class="hljs-keyword">let</span> plugins = container.plugins();
</code></pre>
<p>New objects can also be added to container in runtime:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> container = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).container;

container.append({
  <span class="hljs-attr">helpers</span>: { <span class="hljs-comment">// add helper</span>
    MyHelper: <span class="hljs-keyword">new</span> MyHelper({ <span class="hljs-attr">config1</span>: <span class="hljs-string">'val1'</span> });
  },
  <span class="hljs-attr">support</span>: { <span class="hljs-comment">// add page object</span>
    UserPage: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./pages/user'</span>);
  }
})
</code></pre>
<p>Container also contains current Mocha instance:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> mocha = container.mocha();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="config"></a><a href="#config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config</h3>
<p>CodeceptJS config can be accessed from <code>require('codeceptjs').config.get()</code>:</p>
<pre><code class="hljs css language-js">
<span class="hljs-keyword">let</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).config.get();

<span class="hljs-keyword">if</span> (config.myKey == <span class="hljs-string">'value'</span>) {
  <span class="hljs-comment">// run hook</span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="custom-runner"></a><a href="#custom-runner" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom Runner</h2>
<p>CodeceptJS can be imported and used in custom runners.
To initialize Codecept you need to create Config and Container objects.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> Container = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).container;
<span class="hljs-keyword">let</span> Codecept = <span class="hljs-built_in">require</span>(<span class="hljs-string">'codeceptjs'</span>).codecept;

<span class="hljs-keyword">let</span> config = { <span class="hljs-attr">helpers</span>: { <span class="hljs-attr">WebDriver</span>: { <span class="hljs-attr">browser</span>: <span class="hljs-string">'chrome'</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">'http://localhost'</span> } } };
<span class="hljs-keyword">let</span> opts = { <span class="hljs-attr">steps</span>: <span class="hljs-literal">true</span> };

<span class="hljs-comment">// create runner</span>
<span class="hljs-keyword">let</span> codecept = <span class="hljs-keyword">new</span> Codecept(config, opts);

<span class="hljs-comment">// initialize codeceptjs in current dir</span>
codecept.initGlobals(__dirname);

<span class="hljs-comment">// create helpers, support files, mocha</span>
Container.create(config, opts);

<span class="hljs-comment">// initialize listeners</span>
codecept.runHooks();

<span class="hljs-comment">// run bootstrap function from config</span>
codecept.runBootstrap(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {

  <span class="hljs-comment">// load tests</span>
  codecept.loadTests(<span class="hljs-string">'*_test.js'</span>);

  <span class="hljs-comment">// run tests</span>
  codecept.run();
});

</code></pre>
<p>In this way Codecept runner class can be extended.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-8-15</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/advanced"><span class="arrow-prev">← </span><span>Advanced Usage</span></a><a class="docs-next button" href="/books"><span>Books &amp; Posts</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#bootstrap-amp-teardown">Bootstrap &amp; Teardown</a><ul class="toc-headings"><li><a href="#example-async-bootstrap-in-a-function">Example: Async Bootstrap in a Function</a></li><li><a href="#example-async-teardown-in-a-function">Example: Async Teardown in a Function</a></li><li><a href="#example-bootstrap-amp-teardown-inside-an-object">Example: Bootstrap &amp; Teardown Inside an Object</a></li><li><a href="#example-bootstrap-amp-teardown-inside-config">Example: Bootstrap &amp; Teardown Inside Config</a></li></ul></li><li><a href="#bootstrapall-amp-teardownall">BootstrapAll &amp; TeardownAll</a><ul class="toc-headings"><li><a href="#example-bootstrapall-amp-teardownall-inside-config">Example: BootstrapAll &amp; TeardownAll Inside Config</a></li><li><a href="#example-bootstrap-amp-teardown-inside-an-object-1">Example: Bootstrap &amp; Teardown Inside an Object</a></li></ul></li><li><a href="#plugins">Plugins</a><ul class="toc-headings"><li><a href="#example-execute-code-for-a-specific-group-of-tests">Example: Execute code for a specific group of tests</a></li><li><a href="#example-check-url-before-running-a-test">Example: Check URL before running a test</a></li></ul></li><li><a href="#api">API</a><ul class="toc-headings"><li><a href="#event-listeners">Event Listeners</a></li><li><a href="#recorder">Recorder</a></li><li><a href="#output">Output</a></li><li><a href="#container">Container</a></li><li><a href="#config">Config</a></li></ul></li><li><a href="#custom-runner">Custom Runner</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="CodeceptJS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/quickstart">QuickStart</a><a href="/basics">Guides</a><a href="/reference">Reference</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LWE4MThhN2NmYTgxNTU5MTc4YzAyYWMwY2JkMmZlYWI5MWQ2MDM5MmRmYzZmYmNiNmY5NTAzM2EwMGIwOTNhOGQ">Slack Chat</a><a href="https://codecept.discourse.group" target="_blank" rel="noreferrer noopener">Community Forum</a><a href="http://stackoverflow.com/questions/tagged/codeceptjs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/codeceptjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/Codeception/CodeceptJS">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/codeception/codeceptjs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&amp;utm_medium=footer&amp;utm_term=link&amp;utm_campaign=reference">Commercial Support</a><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&amp;utm_medium=top_menu&amp;utm_term=link&amp;utm_campaign=reference">Trainings</a></div></section><section class="copyright">Copyright © 2019 CodeceptJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0cc13a0af567a05fc38790be681b1491',
                indexName: 'codecept',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>